
<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html lang="en">&ndash;&gt;-->
<!--&lt;!&ndash;<head>&ndash;&gt;-->
<!--&lt;!&ndash;  <meta charset="UTF-8">&ndash;&gt;-->
<!--&lt;!&ndash;  <meta name="viewport" content="width=device-width, initial-scale=1.0">&ndash;&gt;-->
<!--&lt;!&ndash;  <title>Product Input Form</title>&ndash;&gt;-->
<!--&lt;!&ndash;  <style>&ndash;&gt;-->
<!--&lt;!&ndash;    table, th, td {&ndash;&gt;-->
<!--&lt;!&ndash;      border: 1px solid black;&ndash;&gt;-->
<!--&lt;!&ndash;      border-collapse: collapse;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    th, td {&ndash;&gt;-->
<!--&lt;!&ndash;      padding: 8px;&ndash;&gt;-->
<!--&lt;!&ndash;      text-align: left;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .explore-person-img {&ndash;&gt;-->
<!--&lt;!&ndash;      display: none; /* 隱藏圖片 */&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .results-container {&ndash;&gt;-->
<!--&lt;!&ndash;      display: flex;&ndash;&gt;-->
<!--&lt;!&ndash;      align-items: flex-start;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    #results {&ndash;&gt;-->
<!--&lt;!&ndash;      margin-left: 30px;&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;    .explore-person-img {&ndash;&gt;-->
<!--&lt;!&ndash;      display: none; /* 隱藏圖片 */&ndash;&gt;-->
<!--&lt;!&ndash;      margin-left: 20px; /* 與表格保持一些間距 */&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  </style>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->
<!--&lt;!&ndash;<body>&ndash;&gt;-->
<!--&lt;!&ndash;<h1>Add a New Product</h1>&ndash;&gt;-->
<!--&lt;!&ndash;<form action="/add-product" method="POST">&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="date">Date:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="date" id="date" name="date" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="name">Product Name:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="text" id="name" name="name" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="price">Product Price:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="number" step="0.01" id="price" name="price" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <button type="submit">Add Product</button>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</form>&ndash;&gt;-->
<!--&lt;!&ndash;<h1>Search Products</h1>&ndash;&gt;-->
<!--&lt;!&ndash;<form id="search-form">&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="search">Product Name:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="text" id="search" name="search" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="start-date">Start Date:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="date" id="start-date" name="start-date" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <label for="end-date">End Date:</label>&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="date" id="end-date" name="end-date" required>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;  <div>&ndash;&gt;-->
<!--&lt;!&ndash;    <button type="submit">Search</button>&ndash;&gt;-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->
<!--&lt;!&ndash;</form>&ndash;&gt;-->
<!--&lt;!&ndash;<div class="results-container">&ndash;&gt;-->
<!--&lt;!&ndash;<h2>Search Results</h2>&ndash;&gt;-->
<!--&lt;!&ndash;<table id="results">&ndash;&gt;-->
<!--&lt;!&ndash;  <thead>&ndash;&gt;-->
<!--&lt;!&ndash;  <tr>&ndash;&gt;-->
<!--&lt;!&ndash;    <th>Date</th>&ndash;&gt;-->
<!--&lt;!&ndash;    <th>Product Name</th>&ndash;&gt;-->
<!--&lt;!&ndash;    <th>Price</th>&ndash;&gt;-->
<!--&lt;!&ndash;  </tr>&ndash;&gt;-->
<!--&lt;!&ndash;  </thead>&ndash;&gt;-->
<!--&lt;!&ndash;  <tbody>&ndash;&gt;-->
<!--&lt;!&ndash;  </tbody>&ndash;&gt;-->
<!--&lt;!&ndash;</table>&ndash;&gt;-->
<!--&lt;!&ndash;<div class="explore-person-img">&ndash;&gt;-->
<!--&lt;!&ndash;  <a href="#">&ndash;&gt;-->
<!--&lt;!&ndash;    <img id="person-img" src="" alt="explore person">&ndash;&gt;-->
<!--&lt;!&ndash;  </a>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;  document.getElementById('search-form').addEventListener('submit', function(event) {&ndash;&gt;-->
<!--&lt;!&ndash;    event.preventDefault();&ndash;&gt;-->
<!--&lt;!&ndash;    const searchValue = document.getElementById('search').value;&ndash;&gt;-->
<!--&lt;!&ndash;    const startDate = document.getElementById('start-date').value;&ndash;&gt;-->
<!--&lt;!&ndash;    const endDate = document.getElementById('end-date').value;&ndash;&gt;-->

<!--&lt;!&ndash;    fetch(`/search?name=${searchValue}&start=${startDate}&end=${endDate}`)&ndash;&gt;-->
<!--&lt;!&ndash;            .then(response => response.json())&ndash;&gt;-->
<!--&lt;!&ndash;            .then(data => {&ndash;&gt;-->
<!--&lt;!&ndash;              const resultsTable = document.getElementById('results').getElementsByTagName('tbody')[0];&ndash;&gt;-->
<!--&lt;!&ndash;              resultsTable.innerHTML = '';&ndash;&gt;-->
<!--&lt;!&ndash;              data.forEach(product => {&ndash;&gt;-->
<!--&lt;!&ndash;                const row = resultsTable.insertRow();&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(0).innerText = product.formatted_date; // 顯示民國年/月/日格式的日期&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(1).innerText = product.name;&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(2).innerText = product.price;&ndash;&gt;-->
<!--&lt;!&ndash;              });&ndash;&gt;-->
<!--&lt;!&ndash;            })&ndash;&gt;-->
<!--&lt;!&ndash;            .catch(error => {&ndash;&gt;-->
<!--&lt;!&ndash;              console.error('Error fetching search results:', error);&ndash;&gt;-->
<!--&lt;!&ndash;            });&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->
<!--&lt;!&ndash;  document.getElementById('search-form').addEventListener('submit', function(event) {&ndash;&gt;-->
<!--&lt;!&ndash;    event.preventDefault();&ndash;&gt;-->
<!--&lt;!&ndash;    var imgDiv = document.querySelector('.explore-person-img');&ndash;&gt;-->
<!--&lt;!&ndash;    const searchTerm = document.getElementById('search').value.toLowerCase(); // 确保小写比较&ndash;&gt;-->
<!--&lt;!&ndash;    imgDiv.style.display = 'block';&ndash;&gt;-->
<!--&lt;!&ndash;    if (searchTerm === 'banana') {&ndash;&gt;-->
<!--&lt;!&ndash;      document.getElementById('person-img').src = 'https://i.epochtimes.com/assets/uploads/2018/07/007-Fotolia_81632784_Subscription_L-600x400.jpg';&ndash;&gt;-->
<!--&lt;!&ndash;    } else {&ndash;&gt;-->
<!--&lt;!&ndash;      alert('Search term is not banana.');&ndash;&gt;-->
<!--&lt;!&ndash;    }&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->
<!--&lt;!&ndash;  document.getElementById('search-form').addEventListener('submit', function(event) {&ndash;&gt;-->
<!--&lt;!&ndash;    event.preventDefault();&ndash;&gt;-->
<!--&lt;!&ndash;    const searchValue = document.getElementById('search').value;&ndash;&gt;-->
<!--&lt;!&ndash;    const startDate = document.getElementById('start-date').value;&ndash;&gt;-->
<!--&lt;!&ndash;    const endDate = document.getElementById('end-date').value;&ndash;&gt;-->

<!--&lt;!&ndash;    fetch(`/search?name=${searchValue}&start=${startDate}&end=${endDate}`)&ndash;&gt;-->
<!--&lt;!&ndash;            .then(response => response.json())&ndash;&gt;-->
<!--&lt;!&ndash;            .then(data => {&ndash;&gt;-->
<!--&lt;!&ndash;              const resultsTable = document.getElementById('results').getElementsByTagName('tbody')[0];&ndash;&gt;-->
<!--&lt;!&ndash;              resultsTable.innerHTML = '';&ndash;&gt;-->
<!--&lt;!&ndash;              data.products.forEach(product => {&ndash;&gt;-->
<!--&lt;!&ndash;                const row = resultsTable.insertRow();&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(0).innerText = product.formatted_date; // 显示民国年/月/日格式的日期&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(1).innerText = product.name;&ndash;&gt;-->
<!--&lt;!&ndash;                row.insertCell(2).innerText = product.price;&ndash;&gt;-->
<!--&lt;!&ndash;              });&ndash;&gt;-->

<!--&lt;!&ndash;              var imgDiv = document.querySelector('.explore-person-img');&ndash;&gt;-->
<!--&lt;!&ndash;              if (data.imagePath) {&ndash;&gt;-->
<!--&lt;!&ndash;                document.getElementById('person-img').src = data.imagePath;&ndash;&gt;-->
<!--&lt;!&ndash;                imgDiv.style.display = 'block';&ndash;&gt;-->
<!--&lt;!&ndash;              } else {&ndash;&gt;-->
<!--&lt;!&ndash;                imgDiv.style.display = 'none';&ndash;&gt;-->
<!--&lt;!&ndash;                alert('No image found for the specified product.');&ndash;&gt;-->
<!--&lt;!&ndash;              }&ndash;&gt;-->
<!--&lt;!&ndash;            })&ndash;&gt;-->
<!--&lt;!&ndash;            .catch(error => {&ndash;&gt;-->
<!--&lt;!&ndash;              console.error('Error fetching search results:', error);&ndash;&gt;-->
<!--&lt;!&ndash;            });&ndash;&gt;-->
<!--&lt;!&ndash;  });&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Product Input Form</title>-->
<!--  <style>-->
<!--    table, th, td {-->
<!--      border: 1px solid black;-->
<!--      border-collapse: collapse;-->
<!--    }-->
<!--    th, td {-->
<!--      padding: 8px;-->
<!--      text-align: left;-->
<!--    }-->
<!--    .explore-person-img {-->
<!--      display: none; /* 隐藏图片 */-->
<!--    }-->
<!--    .results-container {-->
<!--      display: flex;-->
<!--      align-items: flex-start;-->
<!--    }-->
<!--    #results {-->
<!--      margin-left: 30px;-->
<!--    }-->
<!--    .explore-person-img {-->
<!--      margin-left: 20px; /* 与表格保持一些间距 */-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--<h1>Add a New Product</h1>-->
<!--<form action="/add-product" method="POST" id="add-product-form">-->
<!--  <div>-->
<!--    <label for="date">Date:</label>-->
<!--    <input type="date" id="date" name="date" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <label for="name">Product Name:</label>-->
<!--    <input type="text" id="name" name="name" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <label for="price">Product Price:</label>-->
<!--    <input type="number" step="0.01" id="price" name="price" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <label for="path">Image Path:</label>-->
<!--    <input type="text" id="path" name="path" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <button type="submit">Add Product</button>-->
<!--  </div>-->
<!--</form>-->
<!--<h1>Search Products</h1>-->
<!--<form id="search-form">-->
<!--  <div>-->
<!--    <label for="search">Product Name:</label>-->
<!--    <input type="text" id="search" name="search" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <label for="start-date">Start Date:</label>-->
<!--    <input type="date" id="start-date" name="start-date" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <label for="end-date">End Date:</label>-->
<!--    <input type="date" id="end-date" name="end-date" required>-->
<!--  </div>-->
<!--  <div>-->
<!--    <button type="submit">Search</button>-->
<!--  </div>-->
<!--</form>-->
<!--<div class="results-container">-->
<!--  <h2>Search Results</h2>-->
<!--  <table id="results">-->
<!--    <thead>-->
<!--    <tr>-->
<!--      <th>Date</th>-->
<!--      <th>Product Name</th>-->
<!--      <th>Price</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    </tbody>-->
<!--  </table>-->
<!--  <div class="explore-person-img">-->
<!--    <a href="#">-->
<!--      <img id="person-img" src="" alt="explore person">-->
<!--    </a>-->
<!--  </div>-->
<!--</div>-->
<!--<script>-->
<!--  document.getElementById('add-product-form').addEventListener('submit', function(event) {-->
<!--    event.preventDefault();-->
<!--    const formData = new FormData(event.target);-->
<!--    const data = {-->
<!--      path: formData.get('path'),-->
<!--      name: formData.get('name')-->
<!--    };-->
<!--    fetch('/add-product2', {-->
<!--      method: 'POST',-->
<!--      headers: {-->
<!--        'Content-Type': 'application/json'-->
<!--      },-->
<!--      body: JSON.stringify(data)-->
<!--    })-->
<!--            .then(response => response.text())-->
<!--            .then(message => {-->
<!--              alert(message);-->
<!--            })-->
<!--            .catch(error => {-->
<!--              console.error('Error adding product:', error);-->
<!--            });-->
<!--  });-->
<!--  document.getElementById('search-form').addEventListener('submit', function(event) {-->
<!--    event.preventDefault();-->
<!--    const searchValue = document.getElementById('search').value;-->
<!--    const startDate = document.getElementById('start-date').value;-->
<!--    const endDate = document.getElementById('end-date').value;-->

<!--    fetch(`/search?name=${searchValue}&start=${startDate}&end=${endDate}`)-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--              const resultsTable = document.getElementById('results').getElementsByTagName('tbody')[0];-->
<!--              resultsTable.innerHTML = '';-->
<!--              data.products.forEach(product => {-->
<!--                const row = resultsTable.insertRow();-->
<!--                row.insertCell(0).innerText = product.formatted_date; // 显示民国年/月/日格式的日期-->
<!--                row.insertCell(1).innerText = product.name;-->
<!--                row.insertCell(2).innerText = product.price;-->
<!--              });-->

<!--              var imgDiv = document.querySelector('.explore-person-img');-->
<!--              if (data.imagePath) {-->
<!--                document.getElementById('person-img').src = data.imagePath;-->
<!--                imgDiv.style.display = 'block';-->
<!--              } else {-->
<!--                imgDiv.style.display = 'none';-->
<!--                alert('No image found for the specified product.');-->
<!--              }-->
<!--            })-->
<!--            .catch(error => {-->
<!--              console.error('Error fetching search results:', error);-->
<!--            });-->
<!--  });-->

<!--</script>-->
<!--</body>-->
<!--</html>-->




<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>產品輸入表單</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
      text-align: left;
    }
    /*.explore-person-img {*/
    /*  display: none; !* 隱藏圖片 *!*/
    /*}*/
    .results-container {
      display: flex;
      align-items: flex-start;
    }
    #results {
      margin-left: 30px;
    }
    .explore-person-img {
      margin-left: 20px; /* 與表格保持一些間距 */
    }
    .explore-person-img {
      width: 200px; /* 設定寬度 */
      height: 200px; /* 設定高度 */
      overflow: hidden; /* 隱藏超出區塊的部分 */
      display: none;
      justify-content: center; /* 水平居中 */
      align-items: center; /* 垂直居中 */
    }

    .explore-person-img img {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover; /* 裁剪圖片以適應區塊大小 */
    }

  </style>
</head>
<body>
<h1>新增產品</h1>
<form action="/add-product" method="POST" id="add-product-form">
  <div>
    <label for="date">日期:</label>
    <input type="date" id="date" name="date" required>
  </div>
  <div>
    <label for="name">產品名稱:</label>
    <input type="text" id="name" name="name" required>
  </div>
  <div>
    <label for="price">產品價格:</label>
    <input type="number" step="0.01" id="price" name="price" required>
  </div>
  <div>
    <label for="path">圖片路徑:</label>
    <input type="text" id="path" name="path" required>
  </div>
  <div>
    <button type="submit">新增產品</button>
  </div>
</form>
<h1>搜索產品</h1>
<form id="search-form">
  <div>
    <label for="search">產品名稱:</label>
    <input type="text" id="search" name="search" required>
  </div>
  <div>
    <label for="start-date">開始日期:</label>
    <input type="date" id="start-date" name="start-date" required>
  </div>
  <div>
    <label for="end-date">結束日期:</label>
    <input type="date" id="end-date" name="end-date" required>
  </div>
  <div>
    <button type="submit">搜索</button>
  </div>
</form>
<div class="results-container">
  <h2>搜索結果</h2>
  <table id="results">
    <thead>
    <tr>
      <th>日期</th>
      <th>產品名稱</th>
      <th>價格</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <div class="explore-person-img">
    <a href="#">
      <img id="person-img" src="" alt="explore person">
    </a>
  </div>
</div>
<script>
  // document.getElementById('add-product-form').addEventListener('submit', function(event) {
  //   event.preventDefault();
  //   const formData = new FormData(event.target);
  //   const data = {
  //     date: formData.get('date'),
  //     name: formData.get('name'),
  //     price: formData.get('price'),
  //     path: formData.get('path')
  //   };
  //   fetch('/add-product', {
  //     method: 'POST',
  //     headers: {
  //       'Content-Type': 'application/json'
  //     },
  //     body: JSON.stringify(data)
  //   })
  //           .then(response => response.text())
  //           .then(data => {
  //             alert(data);
  //             event.target.reset();
  //           })
  //           .catch(error => {
  //             console.error('新增產品時出錯:', error);
  //           });
  // });
  document.getElementById('add-product-form').addEventListener('submit', function(event) {
    event.preventDefault();
    const formData = new FormData(event.target);
    let date = formData.get('date');

    // 將日期轉換為民國年格式
    const [year, month, day] = date.split('-');
    const rocYear = (parseInt(year) - 1911).toString(); // 將公元年轉為民國年
    date = `${rocYear}/${month}/${day}`;

    const data = {
      date: date,
      name: formData.get('name'),
      price: formData.get('price'),
      path: formData.get('path')
    };

    fetch('/add-product', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    })
            .then(response => response.text())
            .then(data => {
              alert(data);
              event.target.reset();
            })
            .catch(error => {
              console.error('新增產品時出錯:', error);
            });
  });

  document.getElementById('search-form').addEventListener('submit', function(event) {
    event.preventDefault();
    const searchValue = document.getElementById('search').value;
    const startDate = document.getElementById('start-date').value;
    const endDate = document.getElementById('end-date').value;

    fetch(`/search?name=${encodeURIComponent(searchValue)}&start=${startDate}&end=${endDate}`)
            .then(response => response.json())
            .then(data => {
              const results = data.products;
              const tbody = document.querySelector('#results tbody');
              tbody.innerHTML = '';
              results.forEach(result => {
                const row = document.createElement('tr');
                const dateCell = document.createElement('td');
                dateCell.textContent = result.formatted_date;
                const nameCell = document.createElement('td');
                nameCell.textContent = result.name;
                const priceCell = document.createElement('td');
                priceCell.textContent = result.price.toFixed(2);
                row.appendChild(dateCell);
                row.appendChild(nameCell);
                row.appendChild(priceCell);
                tbody.appendChild(row);
              });
              const explorePersonImg = document.querySelector('.explore-person-img');
              const personImg = document.getElementById('person-img');
              if (data.imagePath) {
                explorePersonImg.style.display = 'block'; // 顯示圖片
                personImg.src = data.imagePath;
              } else {
                explorePersonImg.style.display = 'none'; // 隱藏圖片
                personImg.src = '';
              }
            })
            .catch(error => {
              console.error('搜索產品時出錯:', error);
            });
  });
</script>
</body>
</html>
